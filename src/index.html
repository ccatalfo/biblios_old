<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    [% headIncludes %]
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    [% IF debug %]
    <link rel="stylesheet" type="text/css" href="[% libPath %]lib/extjs2/resources/css/ext-all.css">
    [% ELSE %]
    <link rel="stylesheet" type="text/css" href="[% libPath %]lib/extjs2/resources/css/ext-all-min.css">
    [% END %]
	<!-- our own style sheets -->
    [% IF debug %]
	<link type="text/css" rel="stylesheet" href="[% uiPath %]ui/css/styles.css" />
    [% ELSE %]
	<link type="text/css" rel="stylesheet" href="[% uiPath %]ui/css/styles-min.css" />
    [% END %]
    [% IF debug %]
	<link type="text/css" rel="stylesheet" href="[% uiPath %]ui/css/editor-styles.css" />
	<link type="text/css" rel="stylesheet" href="[% uiPath %]ui/css/preview-styles.css" />
    [% ELSE %]
	<link type="text/css" rel="stylesheet" href="[% uiPath %]ui/css/editor-styles-min.css" />
	<link type="text/css" rel="stylesheet" href="[% uiPath %]ui/css/preview-styles-min.css" />
    [% END %]
    
    <title>Biblios</title>
</head>
<body>
<!-- Loading mask and image -->

<div id="loading-mask" ></div>

<div id="loading">

	<div class="loading-ind">
		<img src="[% uiPath %]ui/images/biblios-logo.gif"><p id='loadingtext'>Loading javascript files...</p>
	</div>

</div>
<!-- firebug lite -->
    [% IF debug %]
    <script type="text/javascript" src="[% libPath %]lib/firebug/firebug.js"></script>
    [% END %]
<!-- cookie utility funcs -->
    <script type="text/javascript" src="[% libPath %]lib/cookieHelpers.js"></script>
<!-- extjs -->
    <script type="text/javascript" src="[% libPath %]lib/extjs2/adapter/ext/ext-base.js"></script>
    <script type="text/javascript" src="[% libPath %]lib/extjs2/ext-all.js"></script>
    [% IF debug %]
	<script type="text/javascript" src="[% libPath %]lib/extjs/PagingMemoryProxy.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs/GoogleGearsProxy.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs2/Ext.ux.NestedXmlReader.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs2/Ext.ux.GearsTreeLoader.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs2/Ext.ux.FacetsTreeLoader.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs2/Ext.ux.UploadDialog.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs2/RowExpander.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/extjs2/miframe.js"></script>
    [% ELSE %]
	<script type="text/javascript" src="[% libPath %]lib/extjs2/ext_ux_libs-min.js"></script>
    [% END %]
<!-- gears -->
	<script type="text/javascript" src="[% libPath %]lib/google_gears/gears_init.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/google_gears/GearsORM_all.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/google_gears/GearsORMShift.js"></script>
<script>
	Ext.get('loadingtext').update('Checking for Google Gears');
  if (!window.google || !google.gears) {
	Ext.get('loadingtext').update('Unable to load Google Gears. Please visit the following url to install: http://gears.google.com/?action=install&message=Install Google Gears to use this Cataloging Application');
	location.href = "http://gears.google.com/?action=install&message=Please install Google Gears to run Biblios" +
                    "&return="+location.href;
  }
</script>
<!-- pazpar2 -->
<script type="text/javascript" src="[% libPath %]lib/pz2.js"></script>
<!-- jquery -->
    [% IF debug %]
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery-1.2.2.js"></script>
    [% ELSE %]
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery-1.2.2.min.js"></script>
    [% END %]
    [% IF debug %]
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery.hotkeys.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery.xpath.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery.cookie.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/jquery/json.js"></script>
    [% ELSE %]
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery_plugins-min.js"></script>
    [% END %]

<!-- sarissa  -->
	<script type="text/javascript" src="[% libPath %]lib/sarissa/sarissa.js"></script>
	<script type="text/javascript" src="[% libPath %]lib/jquery/jquery.xslTransform.packed.js"></script>
	<script src="[% libPath %]lib/sarissa/sarissa_ieemu_xpath.js"		type="text/javascript"></script>
<!-- properties which need to be modified on a global basis -->
<script type="text/javascript">
var libPath = '[% libPath %]';
var hostPort = '[% hostPort %]';
var cgiDir = '[% cgiPath %]';
var embeddedUrl = '[% embeddedUrl %]';
var userid = '[% userid %]';
var embeddedSESSID = '[% SESSID %]';
var openOnLoadRecId = '[% openOnLoadRecId %]';
// reference local blank image
var showMarcXslPath = libPath + "ui/xsl/marcxmlpreview.xsl";
var fixedFieldXslPath = libPath + "ui/xsl/fixedfields_editor.xsl";
var varFieldsXslPath = libPath + "ui/xsl/varfields_inputboxes.xsl";
var marc21varfieldsPath = libPath + 'tools/marc21varfields.xml';
var confPath = libPath + "conf/biblios.conf";
var marc21defsPath = libPath + "ui/xsl/marc21.xml";
var marc21langdefsPath = libPath + 'tools/marcdata/languages.xml';
var marc21ctrydefsPath = libPath + 'tools/marcdata/countries.xml';
var marc21controlfieldsPath = libPath + 'tools/marc21controlfields.xml';
var biblioslogo = libPath + 'ui/images/biblios-logo.gif';
</script>
<!-- biblios -->
    <script type="text/javascript">Ext.get('loadingtext').update('Loading Biblios files');</script>
    [% IF debug %]
    <script type="text/javascript" src="[% uiPath %]ui/js/db.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/init.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/prefs.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/search.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/biblios.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/save.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/ui.js"></script>
    <script type="text/javascript" src="[% uiPath %]ui/js/edit.js"></script>
    [% ELSE %]
    <script type="text/javascript" src="[% uiPath %]ui/js/biblios_min.js"></script>
    [% END %]

<div id='branding-area'>[% headerhtml %]</div>
<div id='biblios'>
<div id='downloads'></div>
<div id='searchform'>
	 	<p class='searchtip'>Enter a search term and choose a search type</p>
		<form onsubmit='doSearch(this); return false;'>
			<input id='query' class='focus' type='text' size='40' name='query'/>
			<select id='searchtype'>	
				<option value=''>Keyword</option>
				<option value='ti'>Title</option>
				<option value='au'>Author</option>
				<option value='su'>Subject</option>
				<option value='isbn'>ISBN</option>
				<option value='issn'>ISSN</option>
			</select>
			<select id='searchloc'>
				<option value='All'>All</option>
				<option value='SearchTargets'>Search Targets</option>
				<option value='LocalFolders'>Local Folders</option>
				<!--<option value='Vendors'>Vendors</option>-->
			</select>
			<input class='submit' type='submit' value='Search'>
		</form>
	  </div>
</div>
    <!-- A Localization Script File comes here -->
    <script type="text/javascript">
		var bibliosdebug = 0;
		var debug = '[% debug %]';
        Ext.onReady(function() {
			Ext.BLANK_IMAGE_URL = libPath + 'lib/extjs2/resources/images/default/s.gif';
            Ext.get('loadingtext').update('Initializing Biblios');
			biblios.app.init();
            loadPlugins();
			Ext.fly('loading').remove();
			// placeholder
		}, biblios.app);
    </script>
    <div id="bibliosfooter">[% footerhtml %]</div>
</body>
</html>
